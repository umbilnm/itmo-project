# ITMO Project

## Пайплайн

Было решено не использовать никакие фреймворки для построения агентов, а реализовать все вручную. Так как в данном случае использование фреймворков не даст никаких преимуществ, а только усложнит код. Код содержит одно ветвление, которое определяет может ли модель ответить на вопрос без дополнительного контекста. Это определяет параметр 'confidence_score'(число от 1 до 10), который модель самостоятельно оценивает. Если он меньше 9, то запрашивается дополнительный контекст, который затем используется для генерации ответа. 

Код полностью реализован в формате structured output, что позволяет гарантировать, что ответ будет соответствовать формату, который мы ожидаем.

1. **Обработка запросов**:  Каждый запрос обрабатывается для определения соответствующей стратегии ответа:
   - **Raw Answer**: Прямо отвечает на вопросы, связанные с Университетом ИТМО.
   - **Agent Plan**: Оценивает запрос для определения необходимости дополнительного контекста.
   - **Answer with Context**: Предоставляет ответы с использованием дополнительного контекста, полученного из внешних источников.

2. **Структурированный вывод**: Ответы структурированы с использованием моделей Pydantic (`RawAnswer`, `AgentAnswer`, `AnswerWithContext`), чтобы гарантировать, что вывод является последовательным и легко анализируемым.

## Запуск с использованием Docker Compose


1. Склонируйте репозиторий:
   ```bash
   git clone <repository-url>
   cd itmo-project
   ```

2. Создайте файл `.env` в корневом каталоге и добавьте необходимые API-ключи и конфигурации модели.

3. Запустите проект с помощью Docker Compose:
   ```bash
   docker-compose up --build
   ```

5. Приложение будет доступно по адресу `http://localhost:8080`.

## Использование

После запуска приложения вы можете отправлять POST-запросы на конечную точку `/api/request` с JSON-полезной нагрузкой, содержащей запрос. Приложение обработает запрос и вернет структурированный ответ.

